{% extends "base.html" %}
{% load static %}


{% block content %}
<!-- Blog Section -->
<section class="bg-light">
    <div class="container">
        <h1 class="text-center contact-heading">Blog</h1>
        {% for post in object_list %}
        {% if post.author.first_name|length > 0 %}
        <h2 class="text-center text-info pb-2"><a href="{% url 'blog-detail' post.pk %}"
                class="contact-fields">{{ post.title }}</a></h2>
        <p class="text-justify">{{ post.body|truncatewords:100 }} <a href="{% url 'blog-detail' post.pk %}"
                class="text-info">Read full blog</a></p>
        <small class="font-italic text-info">Authored By: {{ post.author.first_name }} {{ post.author.last_name }}
            (Administrator Account)</small>
        <div class="pt-2">
            {% if request.user.is_superuser %}
            <a class="btn btn-info" href="#" role="button">Edit</a>
            <!-- Delete Button trigger modal -->
            <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteModal">
                Delete
            </button>

            <!-- Modal -->
            <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header text-center d-block">
                            <h5 class="modal-title" id="deleteModalLabel">Are you sure you want to delete?</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body text-center d-block font-italic">
                            Note - this can't be reversed
                        </div>
                        <div class="modal-footer text-center d-block">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <a class="btn btn-danger" href="#" role="button">Delete</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
        <hr>
        {% else %}
        <h2 class="text-center"><a href="{% url 'blog-detail' post.pk %}" class="contact-fields">{{ post.title }}</a>
        </h2> {{ post.author|title }}
        <p class="text-justify">{{ post.body|truncatewords:100 }}<a href="{% url 'blog-detail' post.pk %}"
                class="text-info">Read full blog</a></p>
        <small class="font-italic text-info">Authored By: {{ post.author|title }} </small>
        <div class="pt-2">
            {% if request.user.is_superuser %}
            <a class="btn btn-info" href="#" role="button">Edit</a>
            <a class="btn btn-danger" href="#" role="button">Remove</a>
            {% endif %}
        </div>
        <hr>
        {% endif %}
        {% endfor %}
    </div>
</section>
{% endblock %}